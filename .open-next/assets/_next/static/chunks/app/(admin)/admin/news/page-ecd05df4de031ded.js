(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[983],{255:(e,t,r)=>{"use strict";function s(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return s}}),r(5155),r(7650),r(5744),r(589)},1553:(e,t,r)=>{Promise.resolve().then(r.bind(r,6905))},2146:(e,t,r)=>{"use strict";function s(e){let{reason:t,children:r}=e;return r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return s}}),r(5262)},2596:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=function(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,s,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t)if(Array.isArray(t)){var l=t.length;for(r=0;r<l;r++)t[r]&&(s=e(t[r]))&&(a&&(a+=" "),a+=s)}else for(s in t)t[s]&&(a&&(a+=" "),a+=s);return a}(e))&&(s&&(s+=" "),s+=t);return s}},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{bindSnapshot:function(){return n},createAsyncLocalStorage:function(){return l},createSnapshot:function(){return i}});let r=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class s{disable(){throw r}getStore(){}run(){throw r}exit(){throw r}enterWith(){throw r}static bind(e){return e}}let a="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function l(){return a?new a:new s}function n(e){return a?a.bind(e):s.bind(e)}function i(){return a?a.snapshot():function(e,...t){return e(...t)}}},5028:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(6645),a=r.n(s)},5695:(e,t,r)=>{"use strict";r.r(t);var s=r(8999),a={};for(let e in s)"default"!==e&&(a[e]=()=>s[e]);r.d(t,a)},5744:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return s.workAsyncStorageInstance}});let s=r(7828)},6386:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var s=r(5155),a=r(6226),l=r(6874),n=r.n(l),i=r(6766),o=r(2596);function d(e){let{title:t,description:r,imageUrl:l,id:d,className:c,featured:u=!1}=e;return(0,s.jsx)(n(),{href:"/news-Insight/".concat(d),className:"group block h-full focus:outline-none",children:(0,s.jsxs)(a.P.div,{transition:{type:"spring",stiffness:260,damping:22},className:(0,o.A)("h-full rounded-[30px] p-3 sm:p-4 md:p-5","bg-[linear-gradient(#171717,#111111)] border border-[#434343]","shadow-[inset_0_1px_0_rgba(255,255,255,.06)]","flex flex-col",c),children:[(0,s.jsxs)("div",{className:(0,o.A)("relative overflow-hidden rounded-[15px]",u?"aspect-[16/9] sm:aspect-[21/8]":"aspect-[4/3] sm:aspect-[36/23]"),children:[l?(0,s.jsx)(i.default,{src:l,alt:t,fill:!0,sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw",className:"object-cover transition-transform duration-500 ease-out group-hover:scale-[1.03]",priority:!1}):(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-600 to-slate-800"}),(0,s.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-[15px] ring-1 ring-white/10 shadow-[inset_0_1px_0_rgba(255,255,255,.08)]"})]}),(0,s.jsx)("h3",{className:"mt-3 sm:mt-4 text-white leading-tight font-semibold text-[16px] sm:text-[18px] md:text-[20px] line-clamp-2",children:t}),(0,s.jsx)("p",{className:"mt-1.5 sm:mt-2 text-[#AFAFAF] leading-5 sm:leading-6 text-[13px] sm:text-sm md:text-[15px] line-clamp-3",dangerouslySetInnerHTML:{__html:r}})]})})}},6645:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let s=r(8229)._(r(7357));function a(e,t){var r;let a={};"function"==typeof e&&(a.loader=e);let l={...a,...t};return(0,s.default)({...l,modules:null==(r=l.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6905:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(5155),a=r(2115),l=r(3464),n=r(5695),i=r(5028),o=r(6386),d=r(9946);let c=(0,d.A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),u=(0,d.A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),m=(0,d.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var g=r(7213);let x=(0,d.A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),h=(0,i.default)(()=>Promise.all([r.e(5004),r.e(277),r.e(6142),r.e(2939)]).then(r.bind(r,2939)),{loadableGenerated:{webpack:()=>[2939]},ssr:!1});function p(){let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)({title:"",description:"",heroImage:null}),[d,p]=(0,a.useState)(null),[b,f]=(0,a.useState)(!1),[y,w]=(0,a.useState)(!1),[j,v]=(0,a.useState)(null),[N,k]=(0,a.useState)(null),[_,A]=(0,a.useState)(null),[C,P]=(0,a.useState)(!1),S=(0,a.useRef)(null),O=(0,a.useRef)(null),E=(0,n.useRouter)();(0,a.useEffect)(()=>{"true"===sessionStorage.getItem("admin")?M():E.push("/admin/login")},[E]);let I=(e,t)=>{v({type:e,message:t}),setTimeout(()=>v(null),5e3)},M=async()=>{f(!0);try{let e=await l.A.get("/api/news");t(e.data.items)}catch(e){I("error","Failed to fetch news items. Please try again."),console.error("Error fetching news:",e)}finally{f(!1)}},T=async e=>{if(e.size>5242880)throw Error("Image size must be 5MB or smaller.");let t=new FormData;return t.append("file",e),t.append("upload_preset","bgm_intro_web_news"),t.append("folder","bgm"),(await l.A.post("https://api.cloudinary.com/v1_1/dksxwp1ci/image/upload",t)).data.secure_url},L=async e=>{P(!0);try{let t=await T(e);return I("success","Content image uploaded successfully!"),t}catch(e){throw I("error",e.message||"Failed to upload content image"),e}finally{P(!1)}},R=async e=>{if(e.preventDefault(),!r.title.trim()||!r.description.trim())return void I("error","Title and description are required.");if(C)return void I("error","Please wait for content images to finish uploading.");w(!0);try{let e="";r.heroImage&&(e=await T(r.heroImage));let t={title:r.title,description:r.description,...e&&{imageUrl:e}};d?(await l.A.put("/api/news/".concat(d),t),I("success","News item updated successfully!")):(await l.A.post("/api/news",t),I("success","News item created successfully!")),D(),M()}catch(e){var t,s;I("error",(null==(s=e.response)||null==(t=s.data)?void 0:t.message)||e.message||"An error occurred"),console.error("Error submitting news:",e)}finally{w(!1)}},D=()=>{i({title:"",description:"",heroImage:null}),p(null),k(null),S.current&&(S.current.value="")},F=async e=>{w(!0);try{await l.A.delete("/api/news/".concat(e)),I("success","News item deleted successfully!"),A(null),M()}catch(e){I("error","Failed to delete news item. Please try again."),console.error("Error deleting news:",e)}finally{w(!1)}};return(0,s.jsxs)("div",{className:"p-6 my-28 max-w-[1240px] mx-auto bg-[#1a1a1a] text-white min-h-screen",children:[j&&(0,s.jsxs)("div",{className:"fixed top-6 right-6 z-50 px-6 py-4 rounded-lg shadow-lg flex items-center gap-3 animate-in slide-in-from-top ".concat("success"===j.type?"bg-green-600":"error"===j.type?"bg-red-600":"bg-blue-600"),children:[(0,s.jsx)(c,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:j.message})]}),C&&(0,s.jsxs)("div",{className:"fixed top-20 right-6 z-50 px-6 py-4 bg-blue-600 rounded-lg shadow-lg flex items-center gap-3",children:[(0,s.jsx)(u,{className:"w-5 h-5 animate-spin"}),(0,s.jsx)("span",{children:"Uploading content image..."})]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"\uD83D\uDCF0 News Management"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"Create and manage news articles with hero images and rich content"})]}),(0,s.jsxs)("form",{onSubmit:R,className:"mb-12 bg-[#222] shadow-xl p-6 rounded-lg space-y-6 border border-gray-800",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:d?"Edit News Item":"Create New News Item"}),d&&(0,s.jsxs)("button",{type:"button",onClick:D,className:"text-sm text-gray-400 hover:text-white transition-colors flex items-center gap-2",children:[(0,s.jsx)(m,{className:"w-4 h-4"}),"Cancel Editing"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:["Title ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",placeholder:"Enter news title...",className:"bg-[#1a1a1a] border border-gray-700 text-white px-4 py-3 w-full rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:r.title,onChange:e=>i({...r,title:e.target.value}),required:!0,disabled:y})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:[(0,s.jsx)(g.A,{className:"w-4 h-4 inline mr-2"}),"Hero Image (optional, max 5MB)"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"This image will be displayed as the main cover/thumbnail for the news article"}),N?(0,s.jsxs)("div",{className:"relative inline-block",children:[(0,s.jsx)("img",{src:N,alt:"Hero Preview",className:"w-full max-w-md h-64 object-cover rounded-lg border border-gray-700"}),(0,s.jsx)("button",{type:"button",onClick:()=>{i({...r,heroImage:null}),k(null),S.current&&(S.current.value="")},disabled:y,className:"absolute -top-2 -right-2 bg-red-600 hover:bg-red-700 rounded-full p-2 transition-colors disabled:opacity-50",children:(0,s.jsx)(m,{className:"w-4 h-4"})})]}):(0,s.jsxs)("label",{className:"flex items-center justify-center w-full h-40 border-2 border-dashed border-gray-700 rounded-lg cursor-pointer hover:border-gray-600 transition-colors bg-[#1a1a1a]",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(x,{className:"w-10 h-10 text-gray-500 mb-2"}),(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"Click to upload hero image"}),(0,s.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG up to 5MB"})]}),(0,s.jsx)("input",{type:"file",accept:"image/*",ref:S,onChange:e=>{var t;let s=(null==(t=e.target.files)?void 0:t[0])||null;if(i({...r,heroImage:s}),s){let e=new FileReader;e.onloadend=()=>{k(e.result)},e.readAsDataURL(s)}else k(null)},className:"hidden",disabled:y})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:["Content ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("div",{className:"bg-blue-900/20 border border-blue-800/50 rounded-lg p-3 mb-3",children:(0,s.jsxs)("p",{className:"text-xs text-blue-300 flex items-start gap-2",children:[(0,s.jsx)(c,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:"Pro Tip:"})," You can drag and drop images directly into the editor or paste them from your clipboard. These images will be embedded within your news content."]})]})}),(0,s.jsx)("div",{className:"rounded-lg overflow-hidden border border-gray-700 focus-within:ring-2 focus-within:ring-blue-500",children:(0,s.jsx)(h,{ref:O,content:r.description,onChange:e=>i({...r,description:e}),onImageUpload:L})})]}),(0,s.jsxs)("div",{className:"flex gap-4 pt-4 border-t border-gray-800",children:[(0,s.jsxs)("button",{type:"submit",disabled:y||C,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-8 py-3 rounded-lg font-medium transition-colors flex items-center gap-2",children:[y&&(0,s.jsx)(u,{className:"w-4 h-4 animate-spin"}),d?"Update News":"Publish News"]}),d&&(0,s.jsx)("button",{type:"button",onClick:D,disabled:y,className:"border border-gray-600 hover:bg-gray-800 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Cancel"})]}),C&&(0,s.jsx)("div",{className:"bg-yellow-900/20 border border-yellow-800/50 rounded-lg p-3",children:(0,s.jsxs)("p",{className:"text-sm text-yellow-300 flex items-center gap-2",children:[(0,s.jsx)(u,{className:"w-4 h-4 animate-spin"}),"Uploading content image... Please wait before submitting."]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold mb-6 flex items-center justify-between",children:[(0,s.jsx)("span",{children:"Published News"}),(0,s.jsxs)("span",{className:"text-sm font-normal text-gray-400",children:[e.length," ",1===e.length?"item":"items"]})]}),b?(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsx)(u,{className:"w-8 h-8 animate-spin text-blue-500"})}):0===e.length?(0,s.jsxs)("div",{className:"text-center py-20 bg-[#222] rounded-lg border border-gray-800",children:[(0,s.jsx)("p",{className:"text-gray-400 text-lg",children:"No news items yet"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Create your first news item above"})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:e.map((e,t)=>(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"bg-[#222] p-4 rounded-lg shadow-lg border border-gray-800 hover:border-gray-700 transition-all",children:[(0,s.jsx)(o.A,{title:e.title,description:e.description,imageUrl:e.imageUrl,id:e.id},"newscardinadmin"+t),(0,s.jsxs)("div",{className:"flex gap-3 mt-4 pt-4 border-t border-gray-800",children:[(0,s.jsx)("button",{onClick:()=>{i({title:e.title,description:e.description,heroImage:null}),p(e.id),k(e.imageUrl||null),window.scrollTo({top:0,behavior:"smooth"})},disabled:y,className:"flex-1 bg-blue-600/20 hover:bg-blue-600/30 text-blue-400 py-2 rounded-lg font-medium transition-colors disabled:opacity-50",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>A(e.id),disabled:y,className:"flex-1 bg-red-600/20 hover:bg-red-600/30 text-red-400 py-2 rounded-lg font-medium transition-colors disabled:opacity-50",children:"Delete"})]})]})},e.id))})]}),_&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-[#222] rounded-lg p-6 max-w-md w-full border border-gray-800 shadow-2xl",children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-3",children:"Confirm Delete"}),(0,s.jsx)("p",{className:"text-gray-400 mb-6",children:"Are you sure you want to delete this news item? This action cannot be undone."}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("button",{onClick:()=>F(_),disabled:y,className:"flex-1 bg-red-600 hover:bg-red-700 disabled:bg-gray-600 text-white py-2.5 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[y&&(0,s.jsx)(u,{className:"w-4 h-4 animate-spin"}),"Delete"]}),(0,s.jsx)("button",{onClick:()=>A(null),disabled:y,className:"flex-1 border border-gray-600 hover:bg-gray-800 text-white py-2.5 rounded-lg font-medium transition-colors",children:"Cancel"})]})]})})]})}},7213:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},7357:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let s=r(5155),a=r(2115),l=r(2146);function n(e){return{default:e&&"default"in e?e.default:e}}r(255);let i={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},o=function(e){let t={...i,...e},r=(0,a.lazy)(()=>t.loader().then(n)),o=t.loading;function d(e){let n=o?(0,s.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,d=i?a.Suspense:a.Fragment,c=t.ssr?(0,s.jsxs)(s.Fragment,{children:[null,(0,s.jsx)(r,{...e})]}):(0,s.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(r,{...e})});return(0,s.jsx)(d,{...i?{fallback:n}:{},children:c})}return d.displayName="LoadableComponent",d}},7828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return s}});let s=(0,r(4054).createAsyncLocalStorage)()},9946:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(2115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:u,...m}=e;return(0,s.createElement)("svg",{ref:t,...n,width:a,height:a,stroke:r,strokeWidth:o?24*Number(i)/Number(a):i,className:l("lucide",d),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{className:o,...d}=r;return(0,s.createElement)(i,{ref:n,iconNode:t,className:l("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...d})});return r.displayName=a(e),r}}},e=>{e.O(0,[9641,6766,3464,6874,6226,8441,5964,7358],()=>e(e.s=1553)),_N_E=e.O()}]);